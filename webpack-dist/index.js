module.exports=function(e){var t={};function o(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(s,n,function(t){return e[t]}.bind(null,n));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=11)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isError=t.formatFetchErrorResult=t.installerVersion=t.getFullCommand=t.getAsset=t.platform=t.getWriteStream=t.unzipFile=t.downloadFileToFile=t.getLatestReleaseInfos=t.githubConstants=t.DiscordLink=t.downloadPath=t.LightcordAppData=t.releaseLink=t.repoLink=void 0;const s=o(14),n=o(1),r=o(3),i=o(15),a=o(4),l=o(16),c=o(2);t.repoLink="https://github.com/Lightcord/Lightcord",t.releaseLink=t.repoLink+"/releases",t.LightcordAppData=s.default("Lightcord"),t.downloadPath=n.join(t.LightcordAppData,"Lightcord.zip"),t.DiscordLink="[33mhttps://discord.gg/7eFff2A[0m",t.githubConstants={baseUrl:"https://api.github.com",repoID:t.repoLink.split("github.com/")[1]};const d=new r.default("installer");function u(e,t){let o=n.basename(e),s=n.join(n.dirname(e),o.split(".").slice(0,-1).join(".")),r=n.join(s,t);return c.mkdirSync(n.dirname(r),{recursive:!0}),c.createWriteStream(r)}function p(e){let t="";return t=process.argv[1].endsWith("bin.js")?"lightcordInstaller":"node "+process.argv[1],t+=" "+e.join(" "),t}async function m(e){if(Array.isArray(e))return e[0];let t,o=await e.text();if(!o)return null;try{t=JSON.parse(o)}catch(e){t=null}return t?"string"==typeof t?t:"message"in t?t.message:"code"in t?t.code:t:o}function h(e){return Array.isArray(e)||200!==e.status}t.getLatestReleaseInfos=async function(){let e=`${t.githubConstants.baseUrl}/repos/${t.githubConstants.repoID}/releases/latest`;d.log(`Fetching latest release from [32m${e}[0m`);let o=await i.fetch(e).catch(e=>[e]);return h(o)&&(d.error(`Couldn't fetch the latest release. Make sure you're connected to internet. Contact us on ${t.DiscordLink} for more help.`),d.error(await m(o)),await a.pressAnyKeyToContinue(),process.exit()),await o.json()},t.downloadFileToFile=async function(e,o,s=(()=>{})){d.log(`Downloading [32m${e}[0m to ${o}`);let n=await i.fetch(e).catch(e=>[e]);return h(n)&&(d.error(`Couldn't download the latest release. Make sure you're connected to internet. Contact us on ${t.DiscordLink} for more help.`),d.error(await m(n)),await a.pressAnyKeyToContinue(),process.exit()),await new Promise((e,t)=>{let r=c.createWriteStream(o);n.body.on("data",e=>{r.write(e),s(e.length)}).on("end",()=>{r.end(),e()}).on("error",e=>{r.end(),t(e)})})},t.unzipFile=async function(e){return new Promise((t,o)=>{l.open(e,{lazyEntries:!0},(s,n)=>{if(s)return o(s);n.readEntry(),n.on("entry",(function(t){/\/$/.test(t.fileName)?n.readEntry():n.openReadStream(t,(function(o,s){if(o)throw o;s.on("end",(function(){n.readEntry()})),s.pipe(u(e,t.fileName))}))})),n.on("end",()=>{t(e.split(".").slice(0,-1).join("."))})})})},t.getWriteStream=u,t.platform=null,"win32"===process.platform?t.platform="win":"darwin"===process.platform?t.platform="mac":"android"===process.platform?t.platform="android":t.platform="linux",t.getAsset=async function(e){let o=e.find(e=>e.name.toLowerCase().startsWith("bandagedbd_"+t.platform)&&e.name.endsWith(".zip"));return o||(d.error(`Couldn't find a matching asset. Make sure your platform (${t.platform}) is supported. Contact us on ${t.DiscordLink} for more help.`),"mac"===t.platform?d.info("This is a reminder that mac OS is not entirely supported. You get this message because no asset was found for your system. Please build from source with "+p(["--build-from-source"])+"."):"android"===t.platform&&d.info("Android is not supported by Lightcord. We might drop a release on the Play Store/Expo. Please contact us to be sure "+t.DiscordLink),d.info(`Platform: [34m${t.platform}[0m`),d.info(`Requested file: [34mlightcord-${t.platform}-*.zip[0m`),d.info("Found assets: "+e.map(e=>`[34m${e.name}[0m`).join(", ")),await a.pressAnyKeyToContinue(),process.exit()),o},t.getFullCommand=p,t.installerVersion="1.0.0",t.formatFetchErrorResult=m,t.isError=h},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.name=e}log(...e){console.log(`[[35m${this.name}[0m]`,...e)}error(...e){console.log(`[[35m${this.name}[0m] [[31mERROR[0m]`,...e)}info(...e){console.log(`[[35m${this.name}[0m] [[34minfo[0m]`,...e)}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pressAnyKeyToContinue=void 0,t.pressAnyKeyToContinue=function(){return process.stdout.isTTY?new Promise(e=>{console.log("Press any key to continue..."),process.stdin.setRawMode(!0),process.stdin.resume(),process.stdin.once("data",()=>{process.stdin.setRawMode(!1),process.stdin.pause(),e()})}):Promise.resolve()}},function(e,t){e.exports=require("node-fetch")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s="[[31mLightcord[0m] ";class n{constructor(e,t,o){this.from=0,this.to=0,this.actual=0,this.from=e,this.to=t,this.actual=this.from,this.format=o||n.format}static format(e,t){return`${e}/${t} ${Math.floor(e/t*100)}%`}update(e){if(process.stdout.isTTY)if(this.actual=this.actual+e,this.actual===this.to){let e=this.format(this.actual,this.to);process.stdout.write("[2K[0G"+s+e+" [32mFinished[0m\n")}else{let e=this.format(this.actual,this.to);process.stdout.write("[2K[0G"+s+e)}else{let e=this.format(this.actual,this.to);process.stdout.write(s+e+"\n")}}}t.default=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyFolder=t.moveFolder=t.copyFile=t.moveFile=void 0;const s=o(2),n=o(1);async function r(e,t){await s.promises.rename(e,t).catch(o=>"EXDEV"===o.code?i(e,t).then(t=>{s.promises.unlink(e)}):Promise.reject(o))}async function i(e,t){var o=s.createReadStream(e),n=s.createWriteStream(t);return new Promise((e,t)=>{o.on("error",t),n.on("error",t),o.on("close",(function(){e()})),o.pipe(n)})}t.moveFile=r,t.copyFile=i,t.moveFolder=async function e(t,o){let i=await s.promises.readdir(t,{withFileTypes:!0});await Promise.all(i.map(async i=>{i.isDirectory()?(await e(n.join(t,i.name),n.join(o,i.name)),await s.promises.rmdir(n.join(t,i.name),{recursive:!0})):i.isFile()&&(await s.promises.mkdir(o,{recursive:!0}),await r(n.join(t,i.name),n.join(o,i.name)))}))},t.copyFolder=async function e(t,o){let r=await s.promises.readdir(t,{withFileTypes:!0});await Promise.all(r.map(async s=>{(s.isDirectory()||s.isFile())&&await e(n.join(t,s.name),n.join(o,s.name))}))}},function(e,t){e.exports=require("cross-spawn")},function(e,t){e.exports=require("child_process")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultItems=t.Menu=void 0;const s=o(0),n=o(18),r=o(19),i=o(0),a=o(20);t.Menu=class{constructor(e,t=!1){this.disabled=!1,this.props=e,this.state={selected:e.selected||null},this.currentMenu=null,this.isSub=t,this.onKeypress=this.onKeypress.bind(this),this.setUpStdin()}setUpStdin(){this.isSub||(process.stdin.setRawMode(!0),process.stdin.resume(),n.emitKeypressEvents(process.stdin),process.stdin.on("keypress",this.onKeypress))}onKeypress(e,t){if(t.ctrl&&("c"===t.name||"d"===t.name))return process.exit();if("[A"===t.code){let e=this.state.selected?this.props.options.findIndex(e=>e.id===this.state.selected):0,t=this.props.options[e-1];t||(t=this.props.options[this.props.options.length-1]),this.state.selected=t.id,this.render()}else if("[B"===t.code){let e=this.state.selected?this.props.options.findIndex(e=>e.id===this.state.selected):0,t=this.props.options[e+1];t||(t=this.props.options[0]),this.state.selected=t.id,this.render()}else if("return"===t.name){if(!this.state.selected)return;this.props.options.find(e=>e.id===this.state.selected).onClick()}}fixLabel(e,t){if(e.length===t)return" "+e+" ";let o=t-e.length,s=" ";for(let e=0;e<o/2;e++)s+=" ";s+=e;for(let e=0;e<o/2;e++)s+=" ";return s+=" ",s.length>t+2&&(s=s.slice(0,-1)),s}renderOption(e,t){let o=t.label;return this.state.selected===t.id&&(o=`[4m${o}[0m`),o="- "+o,o}render(){if(this.disabled)return this.isSub?"":void 0;let e="";if(this.isSub||(e=`\n\n[31m${a}[0m\n\nThis is an interactive menu. \nYou should be able to choose with arrows keys and enter.\nFor help visit our Discord ${s.DiscordLink}\nYou're currently seeing the ${i.platform} menu.\n\n`),this.currentMenu)e+=this.currentMenu.render();else{let t=this.props.options.map(e=>e.label.length).sort().reverse()[0];e+=this.props.options.map(e=>this.renderOption(t,e)).join("\n")+"\n\n"}if(this.isSub)return e;process.stdout.write("[1;1H[0J"+e)}disable(){this.disabled||(this.disabled=!0,this.isSub||(process.stdin.removeAllListeners("keypress"),process.stdin.setRawMode(!1),process.stdin.pause(),console.clear()))}enable(){this.disabled&&(this.disabled=!1,this.setUpStdin(),this.render())}},t.defaultItems=[{id:"discord",label:"Join Our Discord",onClick(){r.open(s.DiscordLink.replace(/\x1b\[\d+m/g,""))}},{id:"close",label:"Quit",onClick(){process.exit()}}]},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const s=o(13),n=o(3),r=o(0);s.patch();const i=o.c[o.s]===e;let a,l=console.log;switch(console.log=(...e)=>l("[[31mLightcord[0m]",...e),console.info=(...e)=>console.log("[[34minfo[0m]",...e),new n.default("Boostrap").log("Initialization"),r.platform){case"win":a=o(17),a.start(i).catch(e=>{console.error(e),console.log(`An error occured in the main process. Please refer to [33mhttps://github.com/Lightcord/LightcordInstaller[0m to how to solve it or join our Discord [33m${r.DiscordLink}[0m`)});break;case"linux":case"android":a=o(21),a.start(i).catch(e=>{console.error(e),console.log(`An error occured in the main process. Please refer to [33mhttps://github.com/Lightcord/LightcordInstaller[0m to how to solve it or join our Discord [33m${r.DiscordLink}[0m`)});break;default:console.log(`Uh oh, it looks like your platform [33m${r.platform}[0m is not supported. Learn how to build from source on ${r.repoLink}`)}}).call(this,o(12)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patch=void 0;o(2);t.patch=function(){1}},function(e,t){e.exports=require("appdata-path")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=void 0;const s=o(5),n=o(0);t.fetch=Object.assign((function(e,t){return"string"==typeof e||"href"in e?(t||(t={}),t.headers?t.headers instanceof s.Headers?t.headers.has("User-Agent")||t.headers.set("User-Agent","LightcordInstaller/"+n.installerVersion):Array.isArray(t.headers)?t.headers.find(e=>"User-Agent"===e[0])||t.headers.push(["User-Agent","LightcordInstaller/"+n.installerVersion]):t.headers["User-Agent"]="LightcordInstaller/"+n.installerVersion:t.headers={"User-Agent":"LightcordInstaller/"+n.installerVersion}):e instanceof s.Request&&(e.headers.has("User-Agent")||e.headers.set("User-Agent","LightcordInstaller/"+n.installerVersion)),s.default(e,t)}),o(5).default)},function(e,t){e.exports=require("yauzl")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.killLightcord=t.download=t.start=void 0;const s=o(2),n=o(3),r=o(0),i=o(1),a=o(6),l=o(7),c=o(1),d=o(8),u=o(4),p=o(9),m=o(10),h=new n.default("win32");async function f(){h.log("Killing instances of Lightcord"),await g(),h.log("Downloading Lightcord to "+r.downloadPath);let e=await r.getLatestReleaseInfos();h.log(`Downloading release ${e.tag_name} (${e.html_url})`);let t=await r.getAsset(e.assets);await s.promises.mkdir(i.dirname(r.downloadPath),{recursive:!0});let o=new a.default(0,t.size);await r.downloadFileToFile(t.browser_download_url,r.downloadPath,e=>{o.update(e)}),h.log("Unzipping... This may take some minutes at worst");let n=await r.unzipFile(r.downloadPath);h.log("[32mFinished unzipping[0m. Moving [31mLightcord[0m and cleaning stuff"),n.toLowerCase().includes("appdata\\roaming")&&(await l.moveFolder(n,c.join(n,"..","..","..","Local","Lightcord")),await s.promises.rmdir(n,{recursive:!0}),n=c.join(n,"..","..","..","Local","Lightcord")),await s.promises.unlink(r.downloadPath),h.log("[32mFinished moving, launching...[0m");let u=i.join(n,"Lightcord.exe");await new Promise((e,t)=>{d.spawn(u,{detached:!0}).on("error",e=>{t(e)}),e()}),h.log("[31mLightcord[0m is [32mnow installed[0m !")}function g(){return new Promise(e=>{p.exec("taskkill /im Lightcord.exe /t /F",()=>e())})}t.start=async function(e){if(e&&2===process.argv.length)await f(),setTimeout(()=>{process.exit()},1e4),await u.pressAnyKeyToContinue(),process.exit();else{console.clear();let e=new m.Menu({options:[{id:"install",label:"Install Lightcord",async onClick(){e.disable(),await f(),await u.pressAnyKeyToContinue(),e.enable()}},...m.defaultItems],selected:"install"});e.render()}},t.download=f,t.killLightcord=g},function(e,t){e.exports=require("readline")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.open=void 0;const s=o(9);t.open=function(e){s.exec(("win32"==process.platform?"start":"android"==process.platform?"xdg-open":"open")+" "+e.replace(/&/g,"^&"),()=>{})}},function(e,t){e.exports="██╗     ██╗ ██████╗ ██╗  ██╗████████╗ ██████╗ ██████╗ ██████╗ ██████╗ \r\n██║     ██║██╔════╝ ██║  ██║╚══██╔══╝██╔════╝██╔═══██╗██╔══██╗██╔══██╗\r\n██║     ██║██║  ███╗███████║   ██║   ██║     ██║   ██║██████╔╝██║  ██║\r\n██║     ██║██║   ██║██╔══██║   ██║   ██║     ██║   ██║██╔══██╗██║  ██║\r\n███████╗██║╚██████╔╝██║  ██║   ██║   ╚██████╗╚██████╔╝██║  ██║██████╔╝\r\n╚══════╝╚═╝ ╚═════╝ ╚═╝  ╚═╝   ╚═╝    ╚═════╝ ╚═════╝ ╚═╝  ╚═╝╚═════╝ \r\n"},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.download=t.start=void 0;const s=o(2),n=o(3),r=o(0),i=o(1),a=o(6),l=o(7),c=o(1),d=o(8),u=o(4),p=o(10),m=o(22),h=new n.default("linux");async function f(){h.log("Downloading Lightcord to "+r.downloadPath);let e=await r.getLatestReleaseInfos();h.log(`Downloading release ${e.tag_name} (${e.html_url})`);let t=await r.getAsset(e.assets);await s.promises.mkdir(i.dirname(r.downloadPath),{recursive:!0});let o=new a.default(0,t.size);await r.downloadFileToFile(t.browser_download_url,r.downloadPath,e=>{o.update(e)}),h.log("Unzipping... This may take some minutes at worst");let n=await r.unzipFile(r.downloadPath);h.log("[32mFinished unzipping[0m. Moving [31mLightcord[0m and cleaning stuff");let u=c.join(m.homedir(),"Lightcord");await l.moveFolder(n,u),await s.promises.rmdir(n,{recursive:!0}),n=u,await s.promises.unlink(r.downloadPath),h.log("[32mFinished moving, launching...[0m");let p=i.join(n,"Lightcord");await new Promise((e,t)=>{d.spawn(p,{detached:!0}).on("error",e=>{t(e)}),e()}),h.log("[31mLightcord[0m is [32mnow installed[0m !")}t.start=async function(e){console.clear();let t=new p.Menu({options:[{id:"install",label:"Install Lightcord",async onClick(){t.disable(),await f(),await u.pressAnyKeyToContinue(),t.enable()}},...p.defaultItems],selected:"install"});t.render()},t.download=f},function(e,t){e.exports=require("os")}]);