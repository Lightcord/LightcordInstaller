/*! For license information please see index.js.LICENSE.txt */
module.exports=(()=>{var e={317:e=>{"use strict";!function(t){var n=/^(b|B)$/,r={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},o={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[],s=0,a=void 0,c=void 0,u=void 0,l=void 0,d=void 0,h=void 0,f=void 0,p=void 0,m=void 0,g=void 0,v=void 0,b=void 0,y=void 0,w=void 0,x=void 0,L=void 0,k=void 0;if(isNaN(e))throw new TypeError("Invalid number");return u=!0===t.bits,y=!0===t.unix,c=t.base||2,b=void 0!==t.round?t.round:y?1:2,f=void 0!==t.locale?t.locale:"",p=t.localeOptions||{},w=void 0!==t.separator?t.separator:"",x=void 0!==t.spacer?t.spacer:y?"":" ",k=t.symbols||{},L=2===c&&t.standard||"jedec",v=t.output||"string",d=!0===t.fullform,h=t.fullforms instanceof Array?t.fullforms:[],a=void 0!==t.exponent?t.exponent:-1,l=c>2?1e3:1024,(m=(g=Number(e))<0)&&(g=-g),(-1===a||isNaN(a))&&(a=Math.floor(Math.log(g)/Math.log(l)))<0&&(a=0),a>8&&(a=8),"exponent"===v?a:(0===g?(i[0]=0,i[1]=y?"":r[L][u?"bits":"bytes"][a]):(s=g/(2===c?Math.pow(2,10*a):Math.pow(1e3,a)),u&&(s*=8)>=l&&a<8&&(s/=l,a++),i[0]=Number(s.toFixed(a>0?b:0)),i[0]===l&&a<8&&void 0===t.exponent&&(i[0]=1,a++),i[1]=10===c&&1===a?u?"kb":"kB":r[L][u?"bits":"bytes"][a],y&&(i[1]="jedec"===L?i[1].charAt(0):a>0?i[1].replace(/B$/,""):i[1],n.test(i[1])&&(i[0]=Math.floor(i[0]),i[1]=""))),m&&(i[0]=-i[0]),i[1]=k[i[1]]||i[1],!0===f?i[0]=i[0].toLocaleString():f.length>0?i[0]=i[0].toLocaleString(f,p):w.length>0&&(i[0]=i[0].toString().replace(".",w)),"array"===v?i:(d&&(i[1]=h[a]?h[a]:o[L][a]+(u?"bit":"byte")+(1===i[0]?"":"s")),"object"===v?{value:i[0],symbol:i[1],exponent:a}:i.join(x)))}i.partial=function(e){return function(t){return i(t,e)}},e.exports=i}("undefined"!=typeof window?window:global)},925:e=>{e.exports="██╗     ██╗ ██████╗ ██╗  ██╗████████╗ ██████╗ ██████╗ ██████╗ ██████╗ \r\n██║     ██║██╔════╝ ██║  ██║╚══██╔══╝██╔════╝██╔═══██╗██╔══██╗██╔══██╗\r\n██║     ██║██║  ███╗███████║   ██║   ██║     ██║   ██║██████╔╝██║  ██║\r\n██║     ██║██║   ██║██╔══██║   ██║   ██║     ██║   ██║██╔══██╗██║  ██║\r\n███████╗██║╚██████╔╝██║  ██║   ██║   ╚██████╗╚██████╔╝██║  ██║██████╔╝\r\n╚══════╝╚═╝ ╚═════╝ ╚═╝  ╚═╝   ╚═╝    ╚═════╝ ╚═════╝ ╚═╝  ╚═╝╚═════╝ \r\n"},530:function(e,t){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r};t.__esModule=!0;var r=function(){function e(e){this.name=e}return e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,n(["[[35m"+this.name+"[0m]"],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,n(["[[35m"+this.name+"[0m] [[31mERROR[0m]"],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,n(["[[35m"+this.name+"[0m] [[34minfo[0m]"],e))},e}();t.default=r},589:(e,t,n)=>{"use strict";t.__esModule=!0;var r=n(317),o="[[31mLightcord[0m] ",i=function(){function e(t,n,r){this.from=0,this.to=0,this.actual=0,this.started=Date.now(),this.from=t,this.to=n,this.actual=this.from,this.format=r||e.format,this.started=Date.now()}return e.format=function(e,t){return r(e,{round:1})+"/"+r(t,{round:1})+" "+Math.floor(e/t*100)+"%"},e.prototype.getElapsedTime=function(){return Date.now()-this.started},e.prototype.update=function(e){if(process.stdout.isTTY)if(this.actual=this.actual+e,this.actual===this.to){var t=this.format(this.actual,this.to);process.stdout.write("[2K[0G"+o+t+" [32mFinished[0m\n")}else t=this.format(this.actual,this.to),process.stdout.write("[2K[0G"+o+t);else t=this.format(this.actual,this.to),process.stdout.write(o+t+"\n")},e}();t.default=i},203:(e,t,n)=>{"use strict";t.__esModule=!0,t.fetch=void 0;var r=n(786),o=n(448);t.fetch=Object.assign((function(e,t){return"string"==typeof e||"href"in e?(t||(t={}),t.headers?t.headers instanceof r.Headers?t.headers.has("User-Agent")||t.headers.set("User-Agent","LightcordInstaller/"+o.installerVersion):Array.isArray(t.headers)?t.headers.find((function(e){return"User-Agent"===e[0]}))||t.headers.push(["User-Agent","LightcordInstaller/"+o.installerVersion]):t.headers["User-Agent"]="LightcordInstaller/"+o.installerVersion:t.headers={"User-Agent":"LightcordInstaller/"+o.installerVersion}):e instanceof r.Request&&(e.headers.has("User-Agent")||e.headers.set("User-Agent","LightcordInstaller/"+o.installerVersion)),r.default(e,t)}),n(786).default)},581:(e,t,n)=>{"use strict";t.__esModule=!0,t.patch=void 0,n(747),t.patch=function(){}},561:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};t.__esModule=!0,t.copyFolder=t.moveFolder=t.copyFile=t.moveFile=void 0;var i=n(747),s=n(622);function a(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,i.promises.rename(e,t).catch((function(n){return"EXDEV"===n.code?c(e,t).then((function(t){i.promises.unlink(e)})):Promise.reject(n)}))];case 1:return n.sent(),[2]}}))}))}function c(e,t){return r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){return n=i.createReadStream(e),r=i.createWriteStream(t),[2,new Promise((function(e,t){n.on("error",t),r.on("error",t),n.on("close",(function(){e()})),n.pipe(r)}))]}))}))}t.moveFile=a,t.copyFile=c,t.moveFolder=function e(t,n){return r(this,void 0,void 0,(function(){var c,u=this;return o(this,(function(l){switch(l.label){case 0:return[4,i.promises.readdir(t,{withFileTypes:!0})];case 1:return c=l.sent(),[4,Promise.all(c.map((function(c){return r(u,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return c.isDirectory()?[4,e(s.join(t,c.name),s.join(n,c.name))]:[3,3];case 1:return r.sent(),[4,i.promises.rmdir(s.join(t,c.name),{recursive:!0})];case 2:return r.sent(),[3,6];case 3:return c.isFile()?[4,i.promises.mkdir(n,{recursive:!0})]:[3,6];case 4:return r.sent(),[4,a(s.join(t,c.name),s.join(n,c.name))];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))})))];case 2:return l.sent(),[2]}}))}))},t.copyFolder=function e(t,n){return r(this,void 0,void 0,(function(){var a,c=this;return o(this,(function(u){switch(u.label){case 0:return[4,i.promises.readdir(t,{withFileTypes:!0})];case 1:return a=u.sent(),[4,Promise.all(a.map((function(i){return r(c,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return i.isDirectory()?[4,e(s.join(t,i.name),s.join(n,i.name))]:[3,2];case 1:return r.sent(),[3,4];case 2:return i.isFile()?[4,e(s.join(t,i.name),s.join(n,i.name))]:[3,4];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))})))];case 2:return u.sent(),[2]}}))}))}},607:function(e,t,n){"use strict";e=n.nmd(e);var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r};t.__esModule=!0;var o=n(581),i=n(530),s=n(448),a=n(257);o.patch();var c=n.c[n.s]===e,u=console.log;switch(console.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u.apply(void 0,r(["[[31mLightcord[0m]"],e))},console.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.log.apply(console,r(["[[34minfo[0m]"],e))},new i.default("Boostrap").log("Initialization"),s.platform){case"win":n(323).start(c).catch((function(e){console.error(e),console.log("An error occured in the main process. Please refer to [33mhttps://github.com/Lightcord/LightcordInstaller[0m to how to solve it or join our Discord "+s.DiscordLink),a.pressAnyKeyToContinue()}));break;case"linux":case"android":n(192).start(c).catch((function(e){console.error(e),console.log("An error occured in the main process. Please refer to [33mhttps://github.com/Lightcord/LightcordInstaller[0m to how to solve it or join our Discord "+s.DiscordLink),a.pressAnyKeyToContinue()}));break;default:console.log("Uh oh, it looks like your platform [33m"+s.platform+"[0m is not supported. Learn how to build from source on "+s.repoLink),a.pressAnyKeyToContinue()}},448:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};t.__esModule=!0,t.isError=t.formatFetchErrorResult=t.installerVersion=t.getFullCommand=t.getAsset=t.platform=t.getWriteStream=t.unzipFile=t.downloadFileToFile=t.getLatestReleaseInfos=t.githubConstants=t.DiscordLink=t.downloadPath=t.LightcordAppData=t.releaseLink=t.repoLink=void 0;var i=n(43),s=n(622),a=n(530),c=n(203),u=n(257),l=n(776),d=n(747);t.repoLink="https://github.com/Lightcord/Lightcord",t.releaseLink=t.repoLink+"/releases",t.LightcordAppData=i.default("Lightcord"),t.downloadPath=s.join(t.LightcordAppData,"Lightcord.zip"),t.DiscordLink="[33mhttps://discord.gg/7eFff2A[0m",t.githubConstants={baseUrl:"https://api.github.com",repoID:t.repoLink.split("github.com/")[1]};var h=new a.default("installer");function f(e,t){var n=s.basename(e),r=s.join(s.dirname(e),n.split(".").slice(0,-1).join(".")),o=s.join(r,t);return d.mkdirSync(s.dirname(o),{recursive:!0}),d.createWriteStream(o)}function p(e){return(process.argv[1].endsWith("bin.js")?"lightcordInstaller":"node "+process.argv[1])+" "+e.join(" ")}function m(e){return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return Array.isArray(e)?[2,e[0]]:[4,e.text()];case 1:if(!(t=r.sent()))return[2,null];try{n=JSON.parse(t)}catch(e){n=null}return n?"string"==typeof n?[2,n]:"message"in n?[2,n.message]:"code"in n?[2,n.code]:[2,n]:[2,t]}}))}))}function g(e){return Array.isArray(e)||200!==e.status}t.getLatestReleaseInfos=function(){return r(this,void 0,void 0,(function(){var e,n,r,i;return o(this,(function(o){switch(o.label){case 0:return e=t.githubConstants.baseUrl+"/repos/"+t.githubConstants.repoID+"/releases",h.log("Fetching latest release from [32m"+e+"[0m"),[4,c.fetch(e).catch((function(e){return[e]}))];case 1:return g(n=o.sent())?(h.error("Couldn't fetch the latest release. Make sure you're connected to internet. Contact us on "+t.DiscordLink+" for more help."),i=(r=h).error,[4,m(n)]):[3,4];case 2:return i.apply(r,[o.sent()]),[4,u.pressAnyKeyToContinue()];case 3:o.sent(),process.exit(),o.label=4;case 4:return[4,n.json()];case 5:return[2,o.sent()[0]]}}))}))},t.downloadFileToFile=function e(n,i,s,a){return void 0===s&&(s=function(){}),void 0===a&&(a=!0),r(this,void 0,void 0,(function(){var r,l,f,p,v;return o(this,(function(o){switch(o.label){case 0:return r=n,a&&(l=n.split("/"),n="https://lightcord.org/api/v1/gh/releases/"+l[l.length-6]+"/"+l[l.length-5]+"/"+l[l.length-2]+"/"+l[l.length-1]),h.log("Downloading [32m"+n+"[0m to "+i),[4,c.fetch(n).catch((function(e){return[e]}))];case 1:return g(f=o.sent())?a?(h.error("Couldn't download the latest release from lightcord's servers, retrying on github."),h.log("You may experience longer downloading time."),[4,e(r,i,s,!1)]):[3,3]:[3,6];case 2:return[2,o.sent()];case 3:return h.error("Couldn't download the latest release. Make sure you're connected to internet. Contact us on "+t.DiscordLink+" for more help."),v=(p=h).error,[4,m(f)];case 4:return v.apply(p,[o.sent()]),[4,u.pressAnyKeyToContinue()];case 5:o.sent(),process.exit(),o.label=6;case 6:return[4,new Promise((function(e,t){var n=d.createWriteStream(i);f.body.on("data",(function(e){n.write(e),s(e.length)})).on("end",(function(){n.end(),e()})).on("error",(function(e){n.end(),t(e)}))}))];case 7:return[2,o.sent()]}}))}))},t.unzipFile=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,new Promise((function(t,n){l.open(e,{lazyEntries:!0},(function(r,o){if(r)return n(r);o.readEntry(),o.on("entry",(function(t){/\/$/.test(t.fileName)?o.readEntry():o.openReadStream(t,(function(n,r){if(n)throw n;r.on("end",(function(){o.readEntry()})),r.pipe(f(e,t.fileName))}))})),o.on("end",(function(){t(e.split(".").slice(0,-1).join("."))}))}))}))]}))}))},t.getWriteStream=f,t.platform=null,"win32"===process.platform?t.platform="win":"darwin"===process.platform?t.platform="mac":"android"===process.platform?t.platform="android":t.platform="linux",t.getAsset=function(e){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return(n=e.find((function(e){return e.name.toLowerCase().startsWith("lightcord-"+t.platform)&&e.name.endsWith(".zip")})))?[3,2]:(h.error("Couldn't find a matching asset. Make sure your platform ("+t.platform+") is supported. Contact us on "+t.DiscordLink+" for more help."),"mac"===t.platform?h.info("This is a reminder that mac OS is not entirely supported. You get this message because no asset was found for your system. Please build from source with "+p(["--build-from-source"])+"."):"android"===t.platform&&h.info("Android is not supported by Lightcord. We might drop a release on the Play Store/Expo. Please contact us to be sure "+t.DiscordLink),h.info("Platform: [34m"+t.platform+"[0m"),h.info("Requested file: [34mlightcord-"+t.platform+"*.zip[0m"),h.info("Found assets: "+e.map((function(e){return"[34m"+e.name+"[0m"})).join(", ")),[4,u.pressAnyKeyToContinue()]);case 1:r.sent(),process.exit(),r.label=2;case 2:return[2,n]}}))}))},t.getFullCommand=p,t.installerVersion="1.0.0",t.formatFetchErrorResult=m,t.isError=g},345:(e,t,n)=>{"use strict";t.__esModule=!0,t.open=void 0;var r=n(129);t.open=function(e){r.exec(("win32"==process.platform?"start":"android"==process.platform?"xdg-open":"open")+" "+e.replace(/&/g,"^&"),(function(){}))}},111:(e,t,n)=>{"use strict";t.__esModule=!0,t.defaultItems=t.Menu=void 0;var r=n(448),o=n(58),i=n(345),s=n(448),a=n(925),c=function(){function e(e,t){void 0===t&&(t=!1),this.disabled=!1,this.props=e,this.state={selected:e.selected||null},this.currentMenu=null,this.isSub=t,this.onKeypress=this.onKeypress.bind(this),this.setUpStdin()}return e.prototype.setUpStdin=function(){this.isSub||(process.stdin.setRawMode(!0),process.stdin.resume(),o.emitKeypressEvents(process.stdin),process.stdin.on("keypress",this.onKeypress))},e.prototype.onKeypress=function(e,t){var n=this;if(t.ctrl&&("c"===t.name||"d"===t.name))return process.exit();if("[A"===t.code){var r=this.state.selected?this.props.options.findIndex((function(e){return e.id===n.state.selected})):0;(o=this.props.options[r-1])||(o=this.props.options[this.props.options.length-1]),this.state.selected=o.id,this.render()}else if("[B"===t.code)r=this.state.selected?this.props.options.findIndex((function(e){return e.id===n.state.selected})):0,(o=this.props.options[r+1])||(o=this.props.options[0]),this.state.selected=o.id,this.render();else if("return"===t.name){if(!this.state.selected)return;var o;(o=this.props.options.find((function(e){return e.id===n.state.selected}))).onClick()}},e.prototype.fixLabel=function(e,t){if(e.length===t)return" "+e+" ";for(var n=t-e.length,r=" ",o=0;o<n/2;o++)r+=" ";for(r+=e,o=0;o<n/2;o++)r+=" ";return(r+=" ").length>t+2&&(r=r.slice(0,-1)),r},e.prototype.renderOption=function(e,t){var n=t.label;return this.state.selected===t.id&&(n="[4m"+n+"[0m"),"- "+n},e.prototype.render=function(){var e=this;if(this.disabled)return this.isSub?"":void 0;var t="";if(this.isSub||(t="\n\n[31m"+a+"[0m\n\nThis is an interactive menu. \nYou should be able to choose with arrows keys and enter.\nFor help visit our Discord "+r.DiscordLink+"\nYou're currently seeing the "+s.platform+" menu.\n\n"),this.currentMenu)t+=this.currentMenu.render();else{var n=this.props.options.map((function(e){return e.label.length})).sort().reverse()[0];t+=this.props.options.map((function(t){return e.renderOption(n,t)})).join("\n")+"\n\n"}if(this.isSub)return t;process.stdout.write("[1;1H[0J"+t)},e.prototype.disable=function(){this.disabled||(this.disabled=!0,this.isSub||(process.stdin.removeAllListeners("keypress"),process.stdin.setRawMode(!1),process.stdin.pause(),console.clear()))},e.prototype.enable=function(){this.disabled&&(this.disabled=!1,this.setUpStdin(),this.render())},e}();t.Menu=c,t.defaultItems=[{id:"discord",label:"Join Our Discord",onClick:function(){i.open(r.DiscordLink.replace(/\x1b\[\d+m/g,""))}},{id:"close",label:"Quit",onClick:function(){process.exit()}}]},192:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r};t.__esModule=!0,t.download=t.start=void 0;var s=n(747),a=n(530),c=n(448),u=n(622),l=n(589),d=n(561),h=n(622),f=n(793),p=n(257),m=n(111),g=n(87),v=new a.default("linux");function b(){return r(this,void 0,void 0,(function(){var e,t,n,r,i,a;return o(this,(function(o){switch(o.label){case 0:return v.log("Downloading Lightcord to "+c.downloadPath),[4,c.getLatestReleaseInfos()];case 1:return e=o.sent(),v.log("Downloading release "+e.tag_name+" ("+e.html_url+")"),[4,c.getAsset(e.assets)];case 2:return t=o.sent(),[4,s.promises.mkdir(u.dirname(c.downloadPath),{recursive:!0})];case 3:return o.sent(),n=new l.default(0,t.size),[4,c.downloadFileToFile(t.browser_download_url,c.downloadPath,(function(e){n.update(e)}))];case 4:return o.sent(),v.log("Unzipping... This may take some minutes at worst"),[4,c.unzipFile(c.downloadPath)];case 5:return r=o.sent(),v.log("[32mFinished unzipping[0m. Moving [31mLightcord[0m and cleaning stuff"),i=h.join(g.homedir(),"Lightcord"),s.existsSync(i)?(v.info("Deleting actual Lightcord."),[4,s.promises.rmdir(i,{recursive:!0})]):[3,7];case 6:o.sent(),o.label=7;case 7:return[4,s.promises.mkdir(i)];case 8:return o.sent(),[4,d.moveFolder(r,i)];case 9:return o.sent(),[4,s.promises.rmdir(r,{recursive:!0})];case 10:return o.sent(),r=i,[4,s.promises.unlink(c.downloadPath)];case 11:return o.sent(),v.log("[32mFinished moving, launching...[0m"),a=u.join(r,"Lightcord"),[4,new Promise((function(e,t){f.spawn(a,{detached:!0}).on("error",(function(e){t(e)})),e()}))];case 12:return o.sent(),v.log("[31mLightcord[0m is [32mnow installed[0m !"),[2]}}))}))}t.start=function(e){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){return console.clear(),(e=new m.Menu({options:i([{id:"install",label:"Install Lightcord",onClick:function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return e.disable(),[4,b()];case 1:return t.sent(),[4,p.pressAnyKeyToContinue()];case 2:return t.sent(),e.enable(),[2]}}))}))}}],m.defaultItems),selected:"install"})).render(),[2]}))}))},t.download=b},323:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r};t.__esModule=!0,t.killLightcord=t.download=t.start=void 0;var s=n(747),a=n(530),c=n(448),u=n(622),l=n(589),d=n(561),h=n(622),f=n(793),p=n(257),m=n(129),g=n(111),v=new a.default("win32");function b(){return r(this,void 0,void 0,(function(){var e,t,n,r,i,a,p;return o(this,(function(o){switch(o.label){case 0:return v.log("Killing instances of Lightcord"),[4,y()];case 1:return o.sent(),v.log("Downloading Lightcord to "+c.downloadPath),[3,2];case 2:return[4,c.getLatestReleaseInfos()];case 3:t=o.sent(),o.label=4;case 4:return e=t,v.log("Downloading release "+e.tag_name+" ("+e.html_url+")"),[4,c.getAsset(e.assets)];case 5:return n=o.sent(),[4,s.promises.mkdir(u.dirname(c.downloadPath),{recursive:!0})];case 6:return o.sent(),r=new l.default(0,n.size),[4,c.downloadFileToFile(n.browser_download_url,c.downloadPath,(function(e){r.update(e)}))];case 7:return o.sent(),v.log("Unzipping..."),[4,c.unzipFile(c.downloadPath)];case 8:return i=o.sent(),v.log("[32mFinished unzipping[0m. Moving [31mLightcord[0m and cleaning stuff"),a=!0,i.toLowerCase().includes("appdata\\roaming")?s.existsSync(h.join(i,"..","..","..","Local","Lightcord"))?(v.info("Deleting actual Lightcord."),[4,s.promises.rmdir(h.join(i,"..","..","..","Local","Lightcord"),{recursive:!0})]):[3,11]:[3,14];case 9:return o.sent(),a=!0,[4,new Promise((function(e){return setImmediate(e)}))];case 10:o.sent(),o.label=11;case 11:return[4,d.moveFolder(i,h.join(i,"..","..","..","Local","Lightcord"))];case 12:return o.sent(),[4,s.promises.rmdir(i,{recursive:!0})];case 13:o.sent(),i=h.join(i,"..","..","..","Local","Lightcord"),o.label=14;case 14:return[4,s.promises.unlink(c.downloadPath)];case 15:return o.sent(),v.log("[32mFinished moving, launching...[0m"),p=u.join(i,"Lightcord.exe"),[4,new Promise((function(e,t){f.spawn(p,["--after-install",a?"--should-create-shortcut":null].filter((function(e){return!!e})),{detached:!0}).on("error",(function(e){t(e)})),e()}))];case 16:return o.sent(),v.log("[31mLightcord[0m is [32mnow installed[0m !"),[2]}}))}))}function y(){return Promise.all([new Promise((function(e){m.exec("taskkill /im Lightcord.exe /t /F",(function(){return e()}))})),new Promise((function(e){m.exec("taskkill /im lightcord.exe /t /F",(function(){return e()}))}))])}t.start=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return e&&2===process.argv.length?[4,b()]:[3,3];case 1:return n.sent(),setTimeout((function(){process.exit()}),1e4),[4,p.pressAnyKeyToContinue()];case 2:return n.sent(),process.exit(),[3,4];case 3:console.clear(),(t=new g.Menu({options:i([{id:"install",label:"Install Lightcord",onClick:function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return t.disable(),[4,b()];case 1:return e.sent(),[4,p.pressAnyKeyToContinue()];case 2:return e.sent(),t.enable(),[2]}}))}))}}],g.defaultItems),selected:"install"})).render(),n.label=4;case 4:return[2]}}))}))},t.download=b,t.killLightcord=y},257:(e,t)=>{"use strict";t.__esModule=!0,t.pressAnyKeyToContinue=void 0,t.pressAnyKeyToContinue=function(){return process.stdout.isTTY?new Promise((function(e){console.log("Press any key to continue..."),process.stdin.setRawMode(!0),process.stdin.resume(),process.stdin.once("data",(function(){process.stdin.setRawMode(!1),process.stdin.pause(),e()}))})):Promise.resolve()}},43:e=>{"use strict";e.exports=require("appdata-path")},129:e=>{"use strict";e.exports=require("child_process")},793:e=>{"use strict";e.exports=require("cross-spawn")},747:e=>{"use strict";e.exports=require("fs")},786:e=>{"use strict";e.exports=require("node-fetch")},87:e=>{"use strict";e.exports=require("os")},622:e=>{"use strict";e.exports=require("path")},58:e=>{"use strict";e.exports=require("readline")},776:e=>{"use strict";e.exports=require("yauzl")}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}return n.c=t,n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n(n.s=607)})();